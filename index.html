<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Professional 3D geometric model viewer with multi-format support"
    />
    <title>3D Geometric Viewer</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/src/styles/theme.css" />
    <link rel="stylesheet" href="/src/styles/base.css" />
    <link rel="stylesheet" href="/src/styles/layout.css" />
    <link rel="stylesheet" href="/src/styles/components.css" />
    <link rel="stylesheet" href="/src/styles/app.css" />
    <link rel="stylesheet" href="/src/styles/main.css" />
  </head>
  <body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Application Container -->
    <div id="app" class="app-container">
      <!-- Header / Toolbar -->
      <header class="app-header" role="banner">
        <div class="app-header__brand">
          <svg class="app-header__logo" viewBox="0 0 32 32" fill="currentColor" aria-hidden="true">
            <path
              d="M16 2L2 10v12l14 8 14-8V10L16 2zm0 3.84L25.24 11 16 16.16 6.76 11 16 5.84zM4 12.52l11 6.3v10.34l-11-6.3V12.52zm13 16.64v-10.34l11-6.3v10.34l-11 6.3z"
            />
          </svg>
          <h1 class="app-header__title">3D Geometric Viewer</h1>
        </div>

        <div class="app-header__actions">
          <button
            id="theme-toggle-btn"
            class="btn btn--ghost btn--icon"
            aria-label="Toggle theme"
            title="Toggle Theme"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="5" />
              <line x1="12" y1="1" x2="12" y2="3" />
              <line x1="12" y1="21" x2="12" y2="23" />
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
              <line x1="1" y1="12" x2="3" y2="12" />
              <line x1="21" y1="12" x2="23" y2="12" />
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
            </svg>
          </button>

          <button
            id="sidebar-toggle-btn"
            class="btn btn--ghost btn--icon"
            aria-label="Toggle sidebar"
            title="Toggle Sidebar"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="3" y1="12" x2="21" y2="12" />
              <line x1="3" y1="6" x2="21" y2="6" />
              <line x1="3" y1="18" x2="21" y2="18" />
            </svg>
          </button>

          <button
            id="help-btn"
            class="btn btn--ghost btn--icon"
            aria-label="Show help"
            title="Keyboard Shortcuts"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10" />
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
              <line x1="12" y1="17" x2="12.01" y2="17" />
            </svg>
          </button>
        </div>
      </header>

      <!-- Main Content Area -->
      <main class="app-main" id="main-content" role="main">
        <!-- Sidebar -->
        <aside class="app-sidebar" id="sidebar" role="complementary" aria-label="Model controls">
          <div class="app-sidebar__content">
            <!-- Tabs -->
            <div class="tabs">
              <div class="tabs__list" role="tablist">
                <button
                  class="tabs__tab tabs__tab--active"
                  id="tab-models"
                  role="tab"
                  aria-selected="true"
                  aria-controls="panel-models"
                >
                  Models
                </button>
                <button
                  class="tabs__tab"
                  id="tab-sections"
                  role="tab"
                  aria-selected="false"
                  aria-controls="panel-sections"
                >
                  Sections
                </button>
                <button
                  class="tabs__tab"
                  id="tab-settings"
                  role="tab"
                  aria-selected="false"
                  aria-controls="panel-settings"
                >
                  Settings
                </button>
              </div>

              <!-- Models Panel -->
              <div
                class="tabs__panel tabs__panel--active"
                id="panel-models"
                role="tabpanel"
                aria-labelledby="tab-models"
              >
                <!-- Model Selector -->
                <div class="control-group">
                  <label for="model-selector">Load Sample Model</label>
                  <div class="flex gap-2">
                    <select
                      id="model-selector"
                      class="select flex-1"
                      aria-label="Select sample model"
                    >
                      <option value="">Choose a model...</option>
                    </select>
                    <button id="load-model-btn" class="btn btn--primary" disabled>Load</button>
                  </div>
                </div>

                <!-- External Model -->
                <div class="control-group">
                  <label for="model-url-input">Load from URL</label>
                  <div class="flex gap-2">
                    <input
                      type="text"
                      id="model-url-input"
                      class="input flex-1"
                      placeholder="https://example.com/model.glb"
                      aria-label="Model URL"
                    />
                    <button id="load-url-btn" class="btn btn--primary">Load</button>
                  </div>
                </div>

                <!-- File Upload -->
                <div class="control-group">
                  <label for="model-file-input">Load from File</label>
                  <div class="flex gap-2">
                    <input
                      type="file"
                      id="model-file-input"
                      class="input flex-1"
                      accept=".gltf,.glb,.obj,.stl,.step,.stp"
                      aria-label="Choose file"
                    />
                    <button id="load-file-btn" class="btn btn--primary" disabled>Load</button>
                  </div>
                  <div
                    id="file-name"
                    style="
                      margin-top: var(--space-2);
                      font-size: var(--text-sm);
                      color: var(--text-secondary);
                    "
                  ></div>
                  <div class="alert alert--info" style="margin-top: var(--space-2)">
                    <small> <strong>Supported:</strong> GLTF/GLB, OBJ, STL, STEP/STP </small>
                  </div>
                </div>

                <!-- Export -->
                <div class="control-group">
                  <label for="export-format">Export Model</label>
                  <div class="flex gap-2">
                    <select
                      id="export-format"
                      class="select flex-1"
                      disabled
                      aria-label="Export format"
                    >
                      <option value="">Select format...</option>
                      <option value="glb">GLB (Binary glTF)</option>
                      <option value="gltf">GLTF (JSON)</option>
                      <option value="obj">OBJ (Wavefront)</option>
                      <option value="stl">STL (Stereolithography)</option>
                    </select>
                    <button id="export-btn" class="btn btn--primary" disabled>Export</button>
                  </div>
                </div>
              </div>

              <!-- Sections Panel -->
              <div
                class="tabs__panel"
                id="panel-sections"
                role="tabpanel"
                aria-labelledby="tab-sections"
              >
                <div class="control-group">
                  <label for="section-search-input">Search Sections</label>
                  <input
                    type="text"
                    id="section-search-input"
                    class="input"
                    placeholder="Search..."
                    disabled
                    aria-label="Search sections"
                  />
                </div>

                <div id="sections-list" class="tree" role="tree" aria-label="Model sections"></div>

                <div class="control-group">
                  <div class="flex gap-2">
                    <button id="expand-all-btn" class="btn btn--secondary btn--sm flex-1" disabled>
                      Expand All
                    </button>
                    <button
                      id="collapse-all-btn"
                      class="btn btn--secondary btn--sm flex-1"
                      disabled
                    >
                      Collapse All
                    </button>
                  </div>
                </div>
              </div>

              <!-- Settings Panel -->
              <div
                class="tabs__panel"
                id="panel-settings"
                role="tabpanel"
                aria-labelledby="tab-settings"
              >
                <!-- Camera Presets -->
                <div class="control-group">
                  <label>Camera Presets</label>
                  <div class="grid grid--cols-2" style="gap: var(--space-2)">
                    <button id="camera-front-btn" class="btn btn--secondary btn--sm" disabled>
                      Front
                    </button>
                    <button id="camera-back-btn" class="btn btn--secondary btn--sm" disabled>
                      Back
                    </button>
                    <button id="camera-top-btn" class="btn btn--secondary btn--sm" disabled>
                      Top
                    </button>
                    <button id="camera-bottom-btn" class="btn btn--secondary btn--sm" disabled>
                      Bottom
                    </button>
                    <button id="camera-left-btn" class="btn btn--secondary btn--sm" disabled>
                      Left
                    </button>
                    <button id="camera-right-btn" class="btn btn--secondary btn--sm" disabled>
                      Right
                    </button>
                    <button id="camera-iso-btn" class="btn btn--secondary btn--sm" disabled>
                      Isometric
                    </button>
                  </div>
                </div>

                <!-- View Controls -->
                <div class="control-group">
                  <label>View Controls</label>
                  <div class="flex-col gap-2">
                    <button id="reset-view-btn" class="btn btn--secondary" disabled>
                      Reset View
                    </button>
                    <button id="frame-object-btn" class="btn btn--secondary" disabled>
                      Frame Model
                    </button>
                    <button id="refresh-btn" class="btn btn--secondary" disabled>Refresh</button>
                    <button id="fullscreen-btn" class="btn btn--secondary">Fullscreen</button>
                  </div>
                </div>

                <!-- Zoom Control -->
                <div class="control-group">
                  <label for="zoom-slider">Zoom: <span id="zoom-value">100%</span></label>
                  <input
                    type="range"
                    id="zoom-slider"
                    class="slider"
                    min="50"
                    max="200"
                    value="100"
                    disabled
                    aria-label="Zoom level"
                    style="width: 100%"
                  />
                </div>

                <!-- Display Options -->
                <div class="control-group">
                  <label>Display</label>
                  <div class="flex-col gap-2">
                    <label class="checkbox">
                      <input type="checkbox" id="wireframe-toggle" disabled />
                      <span>Wireframe Mode</span>
                    </label>
                    <label class="checkbox">
                      <input type="checkbox" id="grid-toggle" checked />
                      <span>Show Grid</span>
                    </label>
                    <label class="checkbox">
                      <input type="checkbox" id="axes-toggle" checked />
                      <span>Show Axes</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </aside>

        <!-- Viewer Area -->
        <div class="app-viewer">
          <canvas id="canvas-3d" class="app-viewer__canvas" aria-label="3D model viewer"></canvas>

          <!-- Loading Overlay -->
          <div id="loading-overlay" class="hidden" aria-live="polite" aria-atomic="true">
            <div style="text-align: center">
              <div class="spinner spinner--lg" style="margin: 0 auto var(--space-4)"></div>
              <div
                class="loading-text"
                style="
                  font-size: var(--text-lg);
                  color: var(--text-primary);
                  margin-bottom: var(--space-2);
                "
              >
                Loading model...
              </div>
              <div
                id="loading-progress"
                style="font-size: var(--text-sm); color: var(--text-secondary)"
              >
                0%
              </div>
            </div>
          </div>

          <!-- Info Overlay -->
          <div
            id="info-overlay"
            class="app-viewer__overlay"
            style="top: var(--space-4); left: var(--space-4)"
          >
            <div id="section-info" class="badge badge--primary"></div>
          </div>
        </div>
      </main>

      <!-- Status Bar -->
      <footer class="app-statusbar" role="contentinfo">
        <div class="app-statusbar__left">
          <span id="status-model">No model loaded</span>
        </div>
        <div class="app-statusbar__center">
          <span id="status-sections"></span>
        </div>
        <div class="app-statusbar__right">
          <span id="status-camera"></span>
        </div>
      </footer>
    </div>

    <!-- Help Modal/Overlay -->
    <div
      id="help-overlay"
      class="modal-backdrop hidden"
      role="dialog"
      aria-labelledby="help-modal-title"
      aria-modal="true"
    >
      <div class="modal modal--md">
        <div class="modal__header">
          <h2 id="help-modal-title" class="modal__title">⌨️ Keyboard Shortcuts</h2>
        </div>
        <div class="modal__body">
          <div id="shortcuts-list" style="display: grid; gap: var(--space-4)">
            <!-- Shortcuts will be populated dynamically by UIController -->
          </div>
        </div>
        <div class="modal__footer">
          <button id="close-help-btn" class="btn btn--primary">Close</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
